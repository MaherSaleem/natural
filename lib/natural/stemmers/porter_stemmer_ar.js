/* the Arabic letters in Unicode */
// Hamza
const o = '\u0621' // Hamza
const ao = '\u0623' // Hamza above Alef
const ao_ = '\u0625' // Hamza below Alef
const aM = '\u0622' // Alef madda
const wo = '\u0624' // Hamza above waw
const yo = '\u0626' // Hamza above yeh

// Letters
const a = '\u0627' // Alef
const a_ = '\u0649' // Alef Maksura
const b = '\u0628' // Beh
const t_ = '\u0629' // Teh_Marbuta
const t = '\u062A' // Teh
const th = '\u062B' // Theh
const j = '\u062C' // Jeem
const h = '\u062D' // Hah
const x = '\u062E' // Khah
const d = '\u062F' // Dal
const dz = '\u0630' // Thal
const r = '\u0631' // Reh
const z = '\u0632' // Zain
const s = '\u0633' // Seen
const sh = '\u0634' // Sheen
const c = '\u0635' // Sad
const dh = '\u0636' // Dad
const tt = '\u0637' // Tah
const zh = '\u0638' // Zah
const i = '\u0639' // Ain
const gh = '\u063A' // Ghain
const f = '\u0641' // Feh
const q = '\u0642' // Qaf
const k = '\u0643' // Kaf
const l = '\u0644' // Lam
const m = '\u0645' // Meem
const n = '\u0646' // Noon
const e = '\u0647' // Heh
const w = '\u0648' // Waw
const y = '\u064A' // Yeh

// Diacritics
const aan = '\u064B' // FatHatan
const uun = '\u064C' // Dammatan
const iin = '\u064D' // Kasratan
const aa = '\u064E' // FatHa
const uu = '\u064F' // Damma
const ii = '\u0650' // Kasra
const oo = '\u0652' // Sukun
const shadda = '\u0651' // Shadda

// Hindu–Arabic numerals
const zero = '\u0660'
const one = '\u0661'
const two = '\u0662'
const three = '\u0663'
const four = '\u0664'
const five = '\u0665'
const six = '\u0666'
const seven = '\u0667'
const eight = '\u0668'
const nine = '\u0669'
const percent = '\u066a'  // PERCENT %
const decimal = '\u066b'  // DECIMAL .
const thousand = '\u066c'  // THOUSANDS '

// Kasheeda
const tatweel = '\u0640' // Kasheeda, Tatweel

// Arabic Punctuation marks
const arabicComma = '\u060C' // Arabic COMMA
const arabicSemiColumn = '\u061B' // Arabic SEMICOLON
const arabicQuestionMark = '\u061F' // Arabic QUESTION ؟

// Shaped forms
const o1 = '\uFE80'  // HAMZA
const ao1 = '\uFE83'  // ALEF_HAMZA_ABOVE
const ao2 = '\uFE84'  // ALEF_HAMZA_ABOVE
const ao_1 = '\uFE87'  // ALEF_HAMZA_BELOW
const ao_2 = '\uFE88'  // ALEF_HAMZA_BELOW
const yo1 = '\uFE8B'  // YEH_HAMZA
const yo2 = '\uFE8C'  // YEH_HAMZA
const yo3 = '\uFE89'  // YEH_HAMZA
const yo4 = '\uFE8A'  // YEH_HAMZA
const aM1 = '\uFE81'  // ALEF_MADDA
const aM2 = '\uFE82'  // ALEF_MADDA
const wo1 = '\uFE85'  // WAW_HAMZA
const wo2 = '\uFE86'  // WAW_HAMZA
const a1 = '\uFE8D'  // ALEF
const a2 = '\uFE8E'  // ALEF
const b1 = '\uFE8F'  // BEH
const b2 = '\uFE90'  // BEH
const b3 = '\uFE91'  // BEH
const b4 = '\uFE92'  // BEH
const t_1 = '\uFE93'  // TEH_MARBUTA
const t_2 = '\uFE94'  // TEH_MARBUTA
const t1 = '\uFE97'  // TEH
const t2 = '\uFE98'  // TEH
const t3 = '\uFE95'  // TEH
const t4 = '\uFE96'  // TEH
const th1 = '\uFE9B'  // THEH
const th2 = '\uFE9C'  // THEH
const th3 = '\uFE9A'  // THEH
const th4 = '\uFE99'  // THEH
const j1 = '\uFE9F'  // JEEM
const j2 = '\uFEA0'  // JEEM
const j3 = '\uFE9D'  // JEEM
const j4 = '\uFE9E'  // JEEM
const h1 = '\uFEA3'  // HAH
const h2 = '\uFEA4'  // HAH
const h3 = '\uFEA1'  // HAH
const h4 = '\uFEA2'  // HAH
const x1 = '\uFEA7'  // KHAH
const x2 = '\uFEA8'  // KHAH
const x3 = '\uFEA5'  // KHAH
const x4 = '\uFEA6'  // KHAH
const d1 = '\uFEA9'  // DAL
const d2 = '\uFEAA'  // DAL
const dz1 = '\uFEAB'  // THAL
const dz2 = '\uFEAC'  // THAL
const r1 = '\uFEAD'  // REH
const r2 = '\uFEAE'  // REH
const z1 = '\uFEAF'  // ZAIN
const z2 = '\uFEB0'  // ZAIN
const s1 = '\uFEB3'  // SEEN
const s2 = '\uFEB4'  // SEEN
const s3 = '\uFEB1'  // SEEN
const s4 = '\uFEB2'  // SEEN
const sh1 = '\uFEB7'  // SHEEN
const sh2 = '\uFEB8'  // SHEEN
const sh3 = '\uFEB5'  // SHEEN
const sh4 = '\uFEB6'  // SHEEN
const c1 = '\uFEBB'  // SAD
const c2 = '\uFEBC'  // SAD
const c3 = '\uFEB9'  // SAD
const c4 = '\uFEBA'  // SAD
const dh1 = '\uFEBF'  // DAD
const dh2 = '\uFEC0'  // DAD
const dh3 = '\uFEBD'  // DAD
const dh4 = '\uFEBE'  // DAD
const tt1 = '\uFEC3'  // TAH
const tt2 = '\uFEC4'  // TAH
const tt3 = '\uFEC1'  // TAH
const tt4 = '\uFEC2'  // TAH
const zh1 = '\uFEC7'  // ZAH
const zh2 = '\uFEC8'  // ZAH
const zh3 = '\uFEC5'  // ZAH
const zh4 = '\uFEC6'  // ZAH
const i1 = '\uFECB'  // AIN
const i2 = '\uFECC'  // AIN
const i3 = '\uFEC9'  // AIN
const i4 = '\uFECA'  // AIN
const gh1 = '\uFECF'  // GHAIN
const gh2 = '\uFED0'  // GHAIN
const gh3 = '\uFECD'  // GHAIN
const gh4 = '\uFECE'  // GHAIN
const f1 = '\uFED3'  // FEH
const f2 = '\uFED4'  // FEH
const f3 = '\uFED1'  // FEH
const f4 = '\uFED2'  // FEH
const q1 = '\uFED7'  // QAF
const q2 = '\uFED8'  // QAF
const q3 = '\uFED5'  // QAF
const q4 = '\uFED6'  // QAF
const k1 = '\uFEDB'  // KAF
const k2 = '\uFEDC'  // KAF
const k3 = '\uFED9'  // KAF
const k4 = '\uFEDA'  // KAF
const l1 = '\uFEDF'  // LAM
const l2 = '\uFEE0'  // LAM
const l3 = '\uFEDD'  // LAM
const l4 = '\uFEDE'  // LAM
const m1 = '\uFEE3'  // MEEM
const m2 = '\uFEE4'  // MEEM
const m3 = '\uFEE1'  // MEEM
const m4 = '\uFEE2'  // MEEM
const n1 = '\uFEE7'  // NOON
const n2 = '\uFEE8'  // NOON
const n3 = '\uFEE5'  // NOON
const n4 = '\uFEE6'  // NOON
const e1 = '\uFEEB'  // HEH
const e2 = '\uFEEC'  // HEH
const e3 = '\uFEE9'  // HEH
const e4 = '\uFEEA'  // HEH
const w1 = '\uFEED'  // WAW
const w2 = '\uFEEE'  // WAW
const a_1 = '\uFEEF'  // ALEF_MAKSURA
const a_2 = '\uFEF0'  // ALEF_MAKSURA
const y1 = '\uFEF3'  // YEH
const y2 = '\uFEF4'  // YEH
const y3 = '\uFEF1'  // YEH
const y4 = '\uFEF2'  // YEH


// Ligatures Lam-Alef
const la = '\uFEFB' // LAM_ALEF
const la2 = '\uFEFC' // LAM_ALEF
const lao = '\uFEF7' // LAM_ALEF_HAMZA_ABOVE
const lao2 = '\uFEF8' // LAM_ALEF_HAMZA_ABOVE
const lao_ = '\uFEF9' // LAM_ALEF_HAMZA_BELOW
const lao_2 = '\uFEFA' // LAM_ALEF_HAMZA_BELOW
const laM = '\uFEF5' // LAM_ALEF_MADDA_ABOVE
const laM2 = '\uFEF6' // LAM_ALEF_MADDA_ABOVE

let regexReplace = (token, replace, replaceWith) => {
  var re = new RegExp(replace, "g");
  return token.replace(re, replaceWith);
}
let removeCharsFromString = (token, listToRemove) => {
  listToRemove.forEach(char => {
    token = regexReplace(token, char, '');
  });
  return token;
}
let replaceMultipleWith = (token, replaceList, replaceWith) => {
  replaceList.forEach(replace => {
    token = regexReplace(token, replace, replaceWith);
  });
  return token;
}
/**
 *
 * @param token: string
 * @constructor
 */
var Normalize_pre = function (token) {
  // remove Diacritics (Harakat)
  let removeDiacritics = token => {
    token = removeCharsFromString(token, [aan, uun, iin, aa, ii, oo, shadda]);
    return token;
  }
  let removeTatweel = token => {
    return regexReplace(token, tatweel, '');
  }

  let removePunctuationMarks = token => {
    token = removeCharsFromString(token,
      [arabicComma, arabicQuestionMark, arabicSemiColumn, '\\.', ',', ';', ':', '\\?', '!', '\\/', '\\*', '%', '\\\\', '"'])
    return token
  }

  let convertHindiNumbersToEnglishNumbers = token => {
    token = regexReplace(token, zero, '0');
    token = regexReplace(token, one, '1');
    token = regexReplace(token, two, '2');
    token = regexReplace(token, three, '3');
    token = regexReplace(token, four, '4');
    token = regexReplace(token, five, '5');
    token = regexReplace(token, six, '6');
    token = regexReplace(token, seven, '7');
    token = regexReplace(token, eight, '8');
    token = regexReplace(token, nine, '9');

    token = regexReplace(token, percent, '');
    token = regexReplace(token, decimal, '');
    token = regexReplace(token, thousand, '');
    return token
  }

  let replaceShapedForms = token => {
    token = regexReplace(token, o1, o); // HAMZA
    token = replaceMultipleWith(token, [ao1, ao2], ao); // ALEF_HAMZA_ABOVE
    token = replaceMultipleWith(token, [ao_1, ao_2], ao_); // ALEF_HAMZA_BELOW
    token = replaceMultipleWith(token, [yo1, yo2, yo3, yo4], yo); // YEH_HAMZA
    token = replaceMultipleWith(token, [aM1, aM2], aM); // ALEF_MADDA
    token = replaceMultipleWith(token, [wo1, wo2], wo); // WAW_HAMZA
    token = replaceMultipleWith(token, [a1, a2], a); // ALEF
    token = replaceMultipleWith(token, [b1, b2, b3, b4], wo); // BEH
    token = replaceMultipleWith(token, [t_1, t_2], t_);  // TEH_MARBUTA
    token = replaceMultipleWith(token, [t1, t2, t3, t4], t);// TEH
    token = replaceMultipleWith(token, [th1, th2, th3, th4], th); // THEH
    token = replaceMultipleWith(token, [j1, j2, j3, j4], j);  // JEEM
    token = replaceMultipleWith(token, [h1, h2, h3, h4], h); // HAH
    token = replaceMultipleWith(token, [x1, x2, x3, x4], x); // KHAH
    token = replaceMultipleWith(token, [d1, d2], d); // DAL
    token = replaceMultipleWith(token, [dz1, dz2], dz); // THAL
    token = replaceMultipleWith(token, [r1, r2], r); // REH
    token = replaceMultipleWith(token, [z1, z2], z); // ZAIN
    token = replaceMultipleWith(token, [s1, s2, s3, s4], s); // SEEN
    token = replaceMultipleWith(token, [sh1, sh2, sh3, sh4], sh); // SHEEN
    token = replaceMultipleWith(token, [c1, c2, c3, c4], c); // SAD
    token = replaceMultipleWith(token, [dh1, dh2, dh3, dh4], dh);  // DAD
    token = replaceMultipleWith(token, [tt1, tt2, tt3, tt4], tt);// TAH
    token = replaceMultipleWith(token, [zh1, zh2, zh3, zh4], zh);  // ZAH
    token = replaceMultipleWith(token, [i1, i2, i3, i4], i); // AIN
    token = replaceMultipleWith(token, [gh1, gh2, gh3, gh4], gh); // GHAIN
    token = replaceMultipleWith(token, [f1, f2, f3, f4], f);  // FEH
    token = replaceMultipleWith(token, [q1, q2, q3, q4], q); // QAF
    token = replaceMultipleWith(token, [k1, k2, k3, k4], k); // KAF
    token = replaceMultipleWith(token, [l1, l2, l3, l4], l); // LAM
    token = replaceMultipleWith(token, [m1, m2, m3, m4], m); // MEEM
    token = replaceMultipleWith(token, [n1, n2, n3, n4], n); // NOON
    token = replaceMultipleWith(token, [e1, e2, e3, e4], e); // HEH
    token = replaceMultipleWith(token, [w1, w2], w); // WAW
    token = replaceMultipleWith(token, [a_1, a_], a_); // ALEF_MAKSURA
    token = replaceMultipleWith(token, [y1, y2, y3, y4], y); // YEH
    return token;
  }

  let replaceLigaturesLamAlf = token => {
    token = replaceMultipleWith(token, [la, la2], `${l}${a}`);
    token = replaceMultipleWith(token, [lao, lao2], `${l}${ao}`);
    token = replaceMultipleWith(token, [lao_, lao_2], `${l}${ao_}`);
    token = replaceMultipleWith(token, [laM, laM2], `${l}${aM}`);
    return token;
  }
  token = removeDiacritics(token);
  token = removeTatweel(token);
  token = removePunctuationMarks(token);
  token = convertHindiNumbersToEnglishNumbers(token);
  token = replaceShapedForms(token);
  token = replaceLigaturesLamAlf(token);
  return token;
}


function wrapWithArray(data) {
  if (!(data instanceof Array)) {
    data = [data];
  }
  return data;
}

/**
 *
 * @param word: string
 * @param suffixes: string[]
 */
let removeSuffix = function (word, suffixes) {
  //TODO fix that, you should look for the longest match (for example,if prefixes are 's', 'ss', and it starts with ss, you should apply the 'ss' rule (Check that https://snowballstem.org/algorithms/porter/stemmer.html)
  suffixes = wrapWithArray(suffixes);
  for (let suffix of suffixes) {
    if (word.endsWith(suffix)) {
      return [true, word.substring(0, word.length - suffix.length)];
    }
  }
  return [false, word];
}
/**
 *
 * @param word: string
 * @param suffixes: string[]
 */
let removePrefix = function (word, prefixes) {
  //TODO fix that, you should look for the longest match (for example,if prefixes are 's', 'ss', and it starts with ss, you should apply the 'ss' rule (Check that https://snowballstem.org/algorithms/porter/stemmer.html)
  prefixes = wrapWithArray(prefixes);
  for (let prefix of prefixes) {
    if (word.startsWith(prefix)) {
      return [true, word.substring(prefix.length)];
    }
  }
  return [false, word];
}
/**
 *
 * @param word: string
 * @param prefixes: string[]
 * @param replaceWith: string
 */
let replacePrefix = function (word, prefixes, replaceWith) {
  //TODO try to optimize that
  [deleted, word] = removePrefix(word, prefixes);
  if (deleted) {
    word = replaceWith + word;
  }
  return [deleted, word];
}

function Prefix_Step1() {
  let wordLength = word.length;
  if (wordLength > 3) {
    [replaced, word] = replacePrefix(word, [`${ao}${ao}`, `${ao}${wo}`], `${ao}`);//TODO check if that will affect the behaviour, since it's in two lines in sbl file
    if (replaced) return word;
    replacePrefix(word, [`${ao}${aM}`], `${aM}`);
    if (replaced) return word;
    replacePrefix(word, [`${ao}${wo}`], `${ao}`);
    if (replaced) return word;
    replacePrefix(word, [`${ao}${ao_}`], `${ao_}`);
    if (replaced) return word;
  }
  return word;
}

function Prefix_Step2a(word) {
  let wordLength = word.length;
  if (wordLength > 5) {
    [removed, word] = removePrefix(word, [`${f}${a}${l}`, `${w}${a}${l}`]);//remove فالـ والـ
  }
  return word;
}

function Prefix_Step2b(word) {
  let wordLength = word.length;
  if (wordLength > 3) {
    [removed, word] = removePrefix(word, [`${f}`, `${w}`]);//TODO check if we can combine that with Prefix_Step2a
  }
  return word;
}

function Prefix_Step3a_Noun(word) {
  let wordLength = word.length;
  if (wordLength > 5) {
    [removed, word] = removePrefix(word, [`${b}${a}${l}`, `${k}${a}${l}`]);
    if (removed) return word;
  }
  if (wordLength > 4) {
    [removed, word] = removePrefix(word, [`${l}${l}`, `${a}${l}`]);
    if (removed) return word;
  }
  return word;
}

function Prefix_Step3b_Noun(word) { // probably  noun and defined
  let wordLength = word.length;
  if (wordLength > 3) {
    [removed, word] = removePrefix(word, `${b}`);
  }
  return word;
}

function Prefix_Step3c_Noun(word) { // probably  noun and undefined
  //TODO check if the order of these replacement is corrent
  let wordLength = word.length;
  if (wordLength > 3) {
    [removed, word] = removePrefix(word, [`${b}`]);
    if (removed) return word;
    [replaced, word] = replacePrefix(word, [`${b}${b}`], `${b}`);
    if (replaced) return word;
    [replaced, word] = replacePrefix(word, [`${k}${k}`], `${k}`);
    if (replaced) return word;
  }
  return word;
}

function Prefix_Step3_Verb(word) { // probably  noun and undefined
  let wordLength = word.length;
  if (wordLength > 4) {
    [removed, word] = removePrefix(word, [`${b}`]);
  }
  return word;
}

function Prefix_Step4_Verb(word) {
  let wordLength = word.length;
  if (wordLength > 4) {
    [replaced, word] = replacePrefix(word, `${s}${y}`, `${y}`);
    if (replaced) return word;
    replacePrefix(word, `${s}${t}`, `${t}`);
    if (replaced) return word;
    replacePrefix(word, `${s}${n}`, `${n}`);
    if (replaced) return word;
    replacePrefix(word, `${s}${ao}`, `${ao}`);
    if (replaced) return word;
  }
  return word;

}

/**
 *
 * @param word: string
 */
function Suffix_Verb_Step1(word) {
  let wordLength = word.length;
  if (wordLength >= 6) {
    [removed, word] = removeSuffix(word, [`${k}${m}${a}`, `${e}${m}${a}`, `${k}${m}${w}`]);//remove كمو، اما، كما
    if (removed) return word;
  }
  if (wordLength >= 5) {
    [removed, word] = removeSuffix(word, [`${n}${y}`, `${n}${a}`, `${e}${a}`, `${e}${m}`, `${e}${n}`, `${k}${m}`, `${k}${n}`]);
    if (removed) return word;
  }
  if (wordLength >= 4) {
    [removed, word] = removeSuffix(word, [`${e}`, `${k}`]);
    if (removed) return word;
  }
  return word;
}

/**
 *
 * @param word: string
 */
function Suffix_Verb_Step2a(word) {
  let wordLength = word.length;
  if (wordLength >= 6) {
    [removed, word] = removeSuffix(word, [`${t}${m}${a}`]);//remove درستما
    if (removed) return word;
  }
  if (wordLength >= 5) {
    [removed, word] = removeSuffix(word, [`${a}${n}`, `${w}${n}`, `${y}${n}`]);//remove present suffix (يدرسان، يدرسون، تدرسون)
    if (removed) return word;
    [removed, word] = removeSuffix(word, [`${n}${a}`, `${t}${a}`, `${t}${n}`]);// remove past suffix (درسنا، درستا، درستن)
    if (removed) return word;
  }
  if (wordLength >= 4) {
    [removed, word] = removeSuffix(word, [`${a}`, `${n}`, `${y}`]);
    if (removed) return word;
    [removed, word] = removeSuffix(word, [`${t}`]);
    if (removed) return word;

  }
  return word;
}

function Suffix_Verb_Step2b(word) {
  let wordLength = word.length;
  if (wordLength >= 5) {
    [removed, word] = removeSuffix(word, [`${t}${m}`, `${w}${a}`]);
    if (removed) return word;
  }
  return word;
}

function Suffix_Verb_Step2c(word) {
  let wordLength = word.length;
  if (wordLength >= 6) {
    [removed, word] = removeSuffix(word, `${t}${m}${w}`);
    if (removed) return word;
  }
  if (wordLength >= 4) {
    [removed, word] = removeSuffix(word, `${w}`);
    if (removed) return word;
  }
  return word;
}


function Suffix_Noun_Step1a(word) {
  let wordLength = word.length;
  if (wordLength >= 6) {
    [removed, word] = removeSuffix(word, [`${k}${m}${a}`, `${e}${m}${a}`]);
    if (removed) return word;
  }
  if (wordLength >= 5) {
    [removed, word] = removeSuffix(word, [`${n}${a}`, `${k}${m}`, `${e}${a}`, `${e}${n}`, `${e}${m}`]);
    if (removed) return word;
  }
  if (wordLength >= 4) {
    [removed, word] = removeSuffix(word, [`${y}`, `${k}`, `${e}`]);
    if (removed) return word;
  }
}

function Suffix_Noun_Step1b(word) {
  let wordLength = word.length;
  if (wordLength > 5) {
    [removed, word] = removeSuffix(word, `${n}`);
    if (removed) return word;
  }
}

function Suffix_Noun_Step2a(word) {
  let wordLength = word.length;
  if (wordLength > 4) {
    [removed, word] = removeSuffix(word, [`${a}`, `${y}`, `${w}`]);
    if (removed) return word;
  }
  return word;
}

function Suffix_Noun_Step2b(word) {
  let wordLength = word.length;
  if (wordLength >= 5) {
    [removed, word] = removeSuffix(word, `${a}${t}`);
    if (removed) return word;
  }
  return word;
}

function Suffix_Noun_Step2c1(word) {
  let wordLength = word.length;
  if (wordLength >= 4) {
    [removed, word] = removeSuffix(word, `${t}`);
    if (removed) return word;
  }
  return word;
}

function Suffix_Noun_Step2c2(word) { // feminine t_
  let wordLength = word.length;
  if (wordLength >= 5) {
    [removed, word] = removeSuffix(word, [`${t}${a}${n}`, `${t}${y}${n}`]);
    if (removed) return word;
  }
  if (wordLength >= 3) {
    [removed, word] = removeSuffix(word, `${t_}`);
    if (removed) return word;
  }
  return word;
}

function Suffix_Noun_Step3(word) { // ya` nisbiya
  let wordLength = word.length;
  if (wordLength >= 3) {
    [removed, word] = removeSuffix(word, `${y}`);
    if (removed) return word;
  }
  return word;
}


/**
 *
 * @param word: string
 */
function getWordType(word) {
  let type = "";
  let wordLength = word.length;
  if (wordLength > 4 && (word.startsWith(`${b}${a}{l}`) || word.startsWith(`${k}${a}{l}`))// it starts with كالـ بالـ
    || (wordLength > 3 && (word.startsWith(`${a}${l}`) || word.startsWith(`${l}${l}`))) // it starts with الـ للـ
    || (wordLength > 2 && word.endsWith(t_)) // ends with ة
    || (wordLength > 3 && (word.endsWith(`${a}${t}`))) //ends with female plural like معلمات
    || (wordLength > 5 && (word.endsWith(`${t}${a}${t}`) || word.endsWith(`${t}${y}${t}`))) //like معلمتان معلمنتين
  ) {
    type = "noun";
  } else {
    type = "verb";
  }
  return type;
}

function Normalize_post(token) {
  // normalize last hamza
  //TODO check backward meaning in sbl file
  token = replaceMultipleWith(token, [ao, ao_, aM], o);
  token = replaceMultipleWith(token, [wo], o);
  token = replaceMultipleWith(token, [yo], o);

  //TODO check do repeat in sbl file
  token = replaceMultipleWith(token, [ao, ao_, aM], a);
  token = replaceMultipleWith(token, [wo], w);
  token = replaceMultipleWith(token, [yo], y);
  return token;
}
function stem(token) {

  token = Normalize_pre(token)
  let wordType = getWordType(token);//TODO check the order of that
  token = Suffix_Verb_Step1(token);
  token = Suffix_Verb_Step2a(token);
  // if (wordType === "verb") {
  //
  // } else if (wordType == "noun") {
  //
  // }
}

//TODO fix that(check how others do it)
module.exports = {stem};


